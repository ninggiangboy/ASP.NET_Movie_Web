@page "/comments/{filmId:int}"
@model Group06_Project.RazorPage.Pages.Comments.IndexModel

@{
    ViewData["Title"] = "Comments";
}

<h2>Comments for Film @Model.FilmId</h2>

<div>
    @foreach (var comment in Model.Comments.Data)
    {
        <div>
            <p>@comment.Content</p>
            <p>By @comment.UserName at @comment.Time</p>
            <form method="post" asp-page-handler="Delete" asp-route-commentName="@comment.UserName">
                <button type="submit">Delete</button>
            </form>
        </div>
    }
</div>

<form method="post" asp-page-handler="Add">
    <input type="hidden" asp-for="FilmId" />
    <textarea asp-for="NewComment.Content"></textarea>
    <input type="hidden" asp-for="NewComment.UserName" value="current_user_id" />
    <button type="submit">Add Comment</button>
</form>
